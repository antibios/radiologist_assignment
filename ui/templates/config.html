{{ define "content" }}
<div class="row">
    <div class="col">
        <h4>System Configuration</h4>
    </div>
</div>

<div class="tabs">
    <a data-ui="#sites">Sites</a>
    <a data-ui="#modalities">Modalities</a>
    <a data-ui="#bodyparts">Body Parts</a>
    <a data-ui="#credentials">Credentials</a>
</div>

<div id="sites" class="page">
    <div class="row">
        <div class="col">
            <h5>Site Codes</h5>
        </div>
        <div class="col right-align">
            <button class="circle" onclick="ui('#addSiteModal')"><i>add</i></button>
        </div>
    </div>
    <table class="stripes">
        <thead>
            <tr><th>Code</th><th>Name</th><th>Actions</th></tr>
        </thead>
        <tbody>
            {{ range .Sites }}
            <tr>
                <td>{{ .Code }}</td>
                <td>{{ .Name }}</td>
                <td>
                    <nav>
                        <button class="circle small transparent" onclick="editSite('{{ .Code }}', '{{ .Name }}')"><i>edit</i></button>
                        <form action="/api/config/sites/delete" method="POST" style="margin:0;">
                            <input type="hidden" name="code" value="{{ .Code }}">
                            <button class="circle small transparent error-text" type="submit"><i>delete</i></button>
                        </form>
                    </nav>
                </td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>

<div id="modalities" class="page">
    <div class="row">
        <div class="col">
            <h5>Modalities</h5>
        </div>
        <div class="col right-align">
            <button class="circle" onclick="ui('#addModalityModal')"><i>add</i></button>
        </div>
    </div>
    <table class="stripes">
        <thead>
            <tr><th>Code</th><th>Name</th><th>Actions</th></tr>
        </thead>
        <tbody>
            {{ range .Modalities }}
            <tr>
                <td>{{ .Code }}</td>
                <td>{{ .Name }}</td>
                <td>
                    <nav>
                        <button class="circle small transparent" onclick="editModality('{{ .Code }}', '{{ .Name }}')"><i>edit</i></button>
                        <form action="/api/config/modalities/delete" method="POST" style="margin:0;">
                            <input type="hidden" name="code" value="{{ .Code }}">
                            <button class="circle small transparent error-text" type="submit"><i>delete</i></button>
                        </form>
                    </nav>
                </td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>

<div id="bodyparts" class="page">
    <div class="row">
        <div class="col">
            <h5>Body Parts</h5>
        </div>
        <div class="col right-align">
            <button class="circle" onclick="ui('#addBodyPartModal')"><i>add</i></button>
        </div>
    </div>
    <table class="stripes">
        <thead>
            <tr><th>Name</th><th>Actions</th></tr>
        </thead>
        <tbody>
            {{ range .BodyParts }}
            <tr>
                <td>{{ .Name }}</td>
                <td>
                    <nav>
                        <button class="circle small transparent" onclick="editBodyPart('{{ .Name }}')"><i>edit</i></button>
                        <form action="/api/config/bodyparts/delete" method="POST" style="margin:0;">
                            <input type="hidden" name="name" value="{{ .Name }}">
                            <button class="circle small transparent error-text" type="submit"><i>delete</i></button>
                        </form>
                    </nav>
                </td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>

<div id="credentials" class="page">
    <div class="row">
        <div class="col">
            <h5>Credentials</h5>
        </div>
        <div class="col right-align">
            <button class="circle" onclick="ui('#addCredentialModal')"><i>add</i></button>
        </div>
    </div>
    <table class="stripes">
        <thead>
            <tr><th>Code</th><th>Name</th><th>Actions</th></tr>
        </thead>
        <tbody>
            {{ range .Credentials }}
            <tr>
                <td>{{ .Code }}</td>
                <td>{{ .Name }}</td>
                <td>
                    <nav>
                        <button class="circle small transparent" onclick="editCredential('{{ .Code }}', '{{ .Name }}')"><i>edit</i></button>
                        <form action="/api/config/credentials/delete" method="POST" style="margin:0;">
                            <input type="hidden" name="code" value="{{ .Code }}">
                            <button class="circle small transparent error-text" type="submit"><i>delete</i></button>
                        </form>
                    </nav>
                </td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>

<!-- Modals -->

<div class="modal" id="addSiteModal">
    <div class="modal-content">
        <h5>Add Site</h5>
        <form action="/api/config/sites" method="POST">
            <div class="field label border">
                <input type="text" name="code" required>
                <label>Code</label>
            </div>
            <div class="field label border">
                <input type="text" name="name" required>
                <label>Name</label>
            </div>
            <div class="row">
                <button type="button" class="transparent" onclick="ui('#addSiteModal')">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>

<div class="modal" id="editSiteModal">
    <div class="modal-content">
        <h5>Edit Site</h5>
        <form action="/api/config/sites/edit" method="POST">
            <input type="hidden" name="original_code" id="editSiteOriginalCode">
            <div class="field label border">
                <input type="text" name="code" id="editSiteCode" required>
                <label>Code</label>
            </div>
            <div class="field label border">
                <input type="text" name="name" id="editSiteName" required>
                <label>Name</label>
            </div>
            <div class="row">
                <button type="button" class="transparent" onclick="ui('#editSiteModal')">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>

<div class="modal" id="editModalityModal">
    <div class="modal-content">
        <h5>Edit Modality</h5>
        <form action="/api/config/modalities/edit" method="POST">
            <input type="hidden" name="original_code" id="editModalityOriginalCode">
            <div class="field label border">
                <input type="text" name="code" id="editModalityCode" required>
                <label>Code</label>
            </div>
            <div class="field label border">
                <input type="text" name="name" id="editModalityName" required>
                <label>Name</label>
            </div>
            <div class="row">
                <button type="button" class="transparent" onclick="ui('#editModalityModal')">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>

<div class="modal" id="editBodyPartModal">
    <div class="modal-content">
        <h5>Edit Body Part</h5>
        <form action="/api/config/bodyparts/edit" method="POST">
            <input type="hidden" name="original_name" id="editBodyPartOriginalName">
            <div class="field label border">
                <input type="text" name="name" id="editBodyPartName" required>
                <label>Name</label>
            </div>
            <div class="row">
                <button type="button" class="transparent" onclick="ui('#editBodyPartModal')">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>

<div class="modal" id="editCredentialModal">
    <div class="modal-content">
        <h5>Edit Credential</h5>
        <form action="/api/config/credentials/edit" method="POST">
            <input type="hidden" name="original_code" id="editCredentialOriginalCode">
            <div class="field label border">
                <input type="text" name="code" id="editCredentialCode" required>
                <label>Code</label>
            </div>
            <div class="field label border">
                <input type="text" name="name" id="editCredentialName" required>
                <label>Name</label>
            </div>
            <div class="row">
                <button type="button" class="transparent" onclick="ui('#editCredentialModal')">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>

<div class="modal" id="addModalityModal">
    <div class="modal-content">
        <h5>Add Modality</h5>
        <form action="/api/config/modalities" method="POST">
            <div class="field label border">
                <input type="text" name="code" required>
                <label>Code</label>
            </div>
            <div class="field label border">
                <input type="text" name="name" required>
                <label>Name</label>
            </div>
            <div class="row">
                <button type="button" class="transparent" onclick="ui('#addModalityModal')">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>

<div class="modal" id="addBodyPartModal">
    <div class="modal-content">
        <h5>Add Body Part</h5>
        <form action="/api/config/bodyparts" method="POST">
            <div class="field label border">
                <input type="text" name="name" required>
                <label>Name</label>
            </div>
            <div class="row">
                <button type="button" class="transparent" onclick="ui('#addBodyPartModal')">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>

<div class="modal" id="addCredentialModal">
    <div class="modal-content">
        <h5>Add Credential</h5>
        <form action="/api/config/credentials" method="POST">
            <div class="field label border">
                <input type="text" name="code" required>
                <label>Code</label>
            </div>
            <div class="field label border">
                <input type="text" name="name" required>
                <label>Name</label>
            </div>
            <div class="row">
                <button type="button" class="transparent" onclick="ui('#addCredentialModal')">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>
<script>
    function editSite(code, name) {
        document.getElementById('editSiteOriginalCode').value = code;
        document.getElementById('editSiteCode').value = code;
        document.getElementById('editSiteName').value = name;
        ui('#editSiteModal');
    }

    function editModality(code, name) {
        document.getElementById('editModalityOriginalCode').value = code;
        document.getElementById('editModalityCode').value = code;
        document.getElementById('editModalityName').value = name;
        ui('#editModalityModal');
    }

    function editBodyPart(name) {
        document.getElementById('editBodyPartOriginalName').value = name;
        document.getElementById('editBodyPartName').value = name;
        ui('#editBodyPartModal');
    }

    function editCredential(code, name) {
        document.getElementById('editCredentialOriginalCode').value = code;
        document.getElementById('editCredentialCode').value = code;
        document.getElementById('editCredentialName').value = name;
        ui('#editCredentialModal');
    }
</script>
{{ end }}
