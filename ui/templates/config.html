{{ define "content" }}
<div class="row">
    <div class="col">
        <h4>System Configuration</h4>
    </div>
</div>

<div style="padding: 1rem;">
    <nav class="tabbed">
        <a class="active" data-ui="#sites">Sites</a>
        <a data-ui="#modalities">Modalities</a>
        <a data-ui="#bodyparts">Body Parts</a>
        <a data-ui="#credentials">Credentials</a>
    </nav>
</div>
<div id="sites" class="page active">
    <div class="row">
        <div class="col max">
            <h5>Site Codes</h5>
        </div>
        <div class="col min">
            <button class="primary" onclick="ui('#addSiteModal')"><i>add</i>Add Site</button>
        </div>
    </div>
    <table class="stripes">
        <thead>
            <tr>
                <th>Code</th>
                <th>Name</th>
                <th class="min">Actions</th>
            </tr>
        </thead>
        <tbody>
            {{ range .Sites }}
            <tr>
                <td>{{ .Code }}</td>
                <td>{{ .Name }}</td>
                <td>
                    <nav>
                        <button class="circle small transparent"
                            onclick="editSite('{{ .Code }}', '{{ .Name }}')"><i>edit</i></button>
                        <form action="/api/config/sites/delete" method="POST" style="margin:0;">
                            <input type="hidden" name="code" value="{{ .Code }}">
                            <button class="circle small transparent error-text" type="submit"><i>delete</i></button>
                        </form>
                    </nav>
                </td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>

<div id="modalities" class="page">
    <div class="row">
        <div class="col max">
            <h5>Modalities</h5>
        </div>
        <div class="col min">
            <button class="primary" onclick="ui('#addModalityModal')"><i>add</i>Add Modality</button>
        </div>
    </div>
    <table class="stripes">
        <thead>
            <tr>
                <th>Code</th>
                <th>Name</th>
                <th class="min">Actions</th>
            </tr>
        </thead>
        <tbody>
            {{ range .Modalities }}
            <tr>
                <td>{{ .Code }}</td>
                <td>{{ .Name }}</td>
                <td>
                    <nav>
                        <button class="circle small transparent"
                            onclick="editModality('{{ .Code }}', '{{ .Name }}')"><i>edit</i></button>
                        <form action="/api/config/modalities/delete" method="POST" style="margin:0;">
                            <input type="hidden" name="code" value="{{ .Code }}">
                            <button class="circle small transparent error-text" type="submit"><i>delete</i></button>
                        </form>
                    </nav>
                </td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>

<div id="bodyparts" class="page">
    <div class="row">
        <div class="col max">
            <h5>Body Parts</h5>
        </div>
        <div class="col min">
            <button class="primary" onclick="ui('#addBodyPartModal')"><i>add</i>Add Body Part</button>
        </div>
    </div>
    <table class="stripes">
        <thead>
            <tr>
                <th>Name</th>
                <th class="min">Actions</th>
            </tr>
        </thead>
        <tbody>
            {{ range .BodyParts }}
            <tr>
                <td>{{ .Name }}</td>
                <td>
                    <nav>
                        <button class="circle small transparent"
                            onclick="editBodyPart('{{ .Name }}')"><i>edit</i></button>
                        <form action="/api/config/bodyparts/delete" method="POST" style="margin:0;">
                            <input type="hidden" name="name" value="{{ .Name }}">
                            <button class="circle small transparent error-text" type="submit"><i>delete</i></button>
                        </form>
                    </nav>
                </td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>

<div id="credentials" class="page">
    <div class="row">
        <div class="col max">
            <h5>Credentials</h5>
        </div>
        <div class="col min">
            <button class="primary" onclick="ui('#addCredentialModal')"><i>add</i>Add Credential</button>
        </div>
    </div>
    <table class="stripes">
        <thead>
            <tr>
                <th>Code</th>
                <th>Name</th>
                <th class="min">Actions</th>
            </tr>
        </thead>
        <tbody>
            {{ range .Credentials }}
            <tr>
                <td>{{ .Code }}</td>
                <td>{{ .Name }}</td>
                <td>
                    <nav>
                        <button class="circle small transparent"
                            onclick="editCredential('{{ .Code }}', '{{ .Name }}')"><i>edit</i></button>
                        <form action="/api/config/credentials/delete" method="POST" style="margin:0;">
                            <input type="hidden" name="code" value="{{ .Code }}">
                            <button class="circle small transparent error-text" type="submit"><i>delete</i></button>
                        </form>
                    </nav>
                </td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>

<!-- Modals -->

<dialog class="modal" id="addSiteModal">
    <h5>Add Site</h5>
    <form action="/api/config/sites" method="POST">
        <div class="field label border">
            <input type="text" name="code" required>
            <label>Code</label>
        </div>
        <div class="field label border">
            <input type="text" name="name" required>
            <label>Name</label>
        </div>
        <div class="row">
            <button type="button" class="transparent" onclick="ui('#addSiteModal')">Cancel</button>
            <button type="submit">Save</button>
        </div>
    </form>

</dialog>

<dialog class="modal" id="editSiteModal">
    <h5>Edit Site</h5>
    <form action="/api/config/sites/edit" method="POST">
        <input type="hidden" name="original_code" id="editSiteOriginalCode">
        <div class="field label border">
            <input type="text" name="code" id="editSiteCode" required>
            <label>Code</label>
        </div>
        <div class="field label border">
            <input type="text" name="name" id="editSiteName" required>
            <label>Name</label>
        </div>
        <div class="row">
            <button type="button" class="transparent" onclick="ui('#editSiteModal')">Cancel</button>
            <button type="submit">Save</button>
        </div>
    </form>
</dialog>

<dialog class="modal" id="editModalityModal">
    <h5>Edit Modality</h5>
    <form action="/api/config/modalities/edit" method="POST">
        <input type="hidden" name="original_code" id="editModalityOriginalCode">
        <div class="field label border">
            <input type="text" name="code" id="editModalityCode" required>
            <label>Code</label>
        </div>
        <div class="field label border">
            <input type="text" name="name" id="editModalityName" required>
            <label>Name</label>
        </div>
        <div class="row">
            <button type="button" class="transparent" onclick="ui('#editModalityModal')">Cancel</button>
            <button type="submit">Save</button>
        </div>
    </form>
</dialog>

<dialog class="modal" id="editBodyPartModal">
    <h5>Edit Body Part</h5>
    <form action="/api/config/bodyparts/edit" method="POST">
        <input type="hidden" name="original_name" id="editBodyPartOriginalName">
        <div class="field label border">
            <input type="text" name="name" id="editBodyPartName" required>
            <label>Name</label>
        </div>
        <div class="row">
            <button type="button" class="transparent" onclick="ui('#editBodyPartModal')">Cancel</button>
            <button type="submit">Save</button>
        </div>
    </form>
</dialog>

<dialog class="modal" id="editCredentialModal">
    <h5>Edit Credential</h5>
    <form action="/api/config/credentials/edit" method="POST">
        <input type="hidden" name="original_code" id="editCredentialOriginalCode">
        <div class="field label border">
            <input type="text" name="code" id="editCredentialCode" required>
            <label>Code</label>
        </div>
        <div class="field label border">
            <input type="text" name="name" id="editCredentialName" required>
            <label>Name</label>
        </div>
        <div class="row">
            <button type="button" class="transparent" onclick="ui('#editCredentialModal')">Cancel</button>
            <button type="submit">Save</button>
        </div>
    </form>
</dialog>

<dialog class="modal" id="addModalityModal">
    <h5>Add Modality</h5>
    <form action="/api/config/modalities" method="POST">
        <div class="field label border">
            <input type="text" name="code" required>
            <label>Code</label>
        </div>
        <div class="field label border">
            <input type="text" name="name" required>
            <label>Name</label>
        </div>
        <div class="row">
            <button type="button" class="transparent" onclick="ui('#addModalityModal')">Cancel</button>
            <button type="submit">Save</button>
        </div>
    </form>
</dialog>

<dialog class="modal" id="addBodyPartModal">
    <h5>Add Body Part</h5>
    <form action="/api/config/bodyparts" method="POST">
        <div class="field label border">
            <input type="text" name="name" required>
            <label>Name</label>
        </div>
        <div class="row">
            <button type="button" class="transparent" onclick="ui('#addBodyPartModal')">Cancel</button>
            <button type="submit">Save</button>
        </div>
    </form>
</dialog>

<dialog class="modal" id="addCredentialModal">
    <h5>Add Credential</h5>
    <form action="/api/config/credentials" method="POST">
        <div class="field label border">
            <input type="text" name="code" required>
            <label>Code</label>
        </div>
        <div class="field label border">
            <input type="text" name="name" required>
            <label>Name</label>
        </div>
        <div class="row">
            <button type="button" class="transparent" onclick="ui('#addCredentialModal')">Cancel</button>
            <button type="submit">Save</button>
        </div>
    </form>
</dialog>
{{ end }}